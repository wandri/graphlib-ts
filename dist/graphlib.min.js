var graphlib=(()=>{var ge=Object.defineProperty;var ve=(n,e,r)=>e in n?ge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var h=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var f=(n,e,r)=>ve(n,typeof e!="symbol"?e+"":e,r);var w=h(($e,L)=>{"use strict";var Ee="\0",p="\0",x="",m=class{constructor(e){f(this,"_isDirected",!0);f(this,"_isMultigraph",!1);f(this,"_isCompound",!1);f(this,"_label");f(this,"_defaultNodeLabelFn",()=>{});f(this,"_defaultEdgeLabelFn",()=>{});f(this,"_nodes",{});f(this,"_in",{});f(this,"_preds",{});f(this,"_out",{});f(this,"_sucs",{});f(this,"_edgeObjs",{});f(this,"_edgeLabels",{});f(this,"_nodeCount",0);f(this,"_edgeCount",0);f(this,"_parent");f(this,"_children");e&&(this._isDirected=Object.hasOwn(e,"directed")?e.directed:!0,this._isMultigraph=Object.hasOwn(e,"multigraph")?e.multigraph:!1,this._isCompound=Object.hasOwn(e,"compound")?e.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[p]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,typeof e!="function"&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(r=>Object.keys(e._in[r]).length===0)}sinks(){var e=this;return this.nodes().filter(r=>Object.keys(e._out[r]).length===0)}setNodes(e,r){var t=arguments,i=this;return e.forEach(function(s){t.length>1?i.setNode(s,r):i.setNode(s)}),this}setNode(e,r){return Object.hasOwn(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=r),this):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=p,this._children[e]={},this._children[p][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){var r=this;if(Object.hasOwn(this._nodes,e)){var t=i=>r.removeEdge(r._edgeObjs[i]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(i){r.setParent(i)}),delete this._children[e]),Object.keys(this._in[e]).forEach(t),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r===void 0)r=p;else{r+="";for(var t=r;t!==void 0;t=this.parent(t))if(t===e)throw new Error("Setting "+r+" as parent of "+e+" would create a cycle");this.setNode(r)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=r,this._children[r][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var r=this._parent[e];if(r!==p)return r}}children(e=p){if(this._isCompound){var r=this._children[e];if(r)return Object.keys(r)}else{if(e===p)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var r=this._preds[e];if(r)return Object.keys(r)}successors(e){var r=this._sucs[e];if(r)return Object.keys(r)}neighbors(e){var r=this.predecessors(e);if(r){let i=new Set(r);for(var t of this.successors(e))i.add(t);return Array.from(i.values())}}isLeaf(e){var r;return this.isDirected()?r=this.successors(e):r=this.neighbors(e),r.length===0}filterNodes(e){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var t=this;Object.entries(this._nodes).forEach(function([a,o]){e(a)&&r.setNode(a,o)}),Object.values(this._edgeObjs).forEach(function(a){r.hasNode(a.v)&&r.hasNode(a.w)&&r.setEdge(a,t.edge(a))});var i={};function s(a){var o=t.parent(a);return o===void 0||r.hasNode(o)?(i[a]=o,o):o in i?i[o]:s(o)}return this._isCompound&&r.nodes().forEach(a=>r.setParent(a,s(a))),r}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,typeof e!="function"&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,r){var t=this,i=arguments;return e.reduce(function(s,a){return i.length>1?t.setEdge(s,a,r):t.setEdge(s,a),a}),this}setEdge(){var e,r,t,i,s=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(e=a.v,r=a.w,t=a.name,arguments.length===2&&(i=arguments[1],s=!0)):(e=a,r=arguments[1],t=arguments[3],arguments.length>2&&(i=arguments[2],s=!0)),e=""+e,r=""+r,t!==void 0&&(t=""+t);var o=v(this._isDirected,e,r,t);if(Object.hasOwn(this._edgeLabels,o))return s&&(this._edgeLabels[o]=i),this;if(t!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(r),this._edgeLabels[o]=s?i:this._defaultEdgeLabelFn(e,r,t);var u=we(this._isDirected,e,r,t);return e=u.v,r=u.w,Object.freeze(u),this._edgeObjs[o]=u,q(this._preds[r],e),q(this._sucs[e],r),this._in[r][o]=u,this._out[e][o]=u,this._edgeCount++,this}edge(e,r,t){var i=arguments.length===1?b(this._isDirected,arguments[0]):v(this._isDirected,e,r,t);return this._edgeLabels[i]}edgeAsObj(){let e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,r,t){var i=arguments.length===1?b(this._isDirected,arguments[0]):v(this._isDirected,e,r,t);return Object.hasOwn(this._edgeLabels,i)}removeEdge(e,r,t){var i=arguments.length===1?b(this._isDirected,arguments[0]):v(this._isDirected,e,r,t),s=this._edgeObjs[i];return s&&(e=s.v,r=s.w,delete this._edgeLabels[i],delete this._edgeObjs[i],D(this._preds[r],e),D(this._sucs[e],r),delete this._in[r][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,r){return this.isDirected()?this.filterEdges(this._in[e],e,r):this.nodeEdges(e,r)}outEdges(e,r){return this.isDirected()?this.filterEdges(this._out[e],e,r):this.nodeEdges(e,r)}nodeEdges(e,r){if(e in this._nodes)return this.filterEdges({...this._in[e],...this._out[e]},e,r)}filterEdges(e,r,t){if(e){var i=Object.values(e);return t?i.filter(function(s){return s.v===r&&s.w===t||s.v===t&&s.w===r}):i}}};function q(n,e){n[e]?n[e]++:n[e]=1}function D(n,e){--n[e]||delete n[e]}function v(n,e,r,t){var i=""+e,s=""+r;if(!n&&i>s){var a=i;i=s,s=a}return i+x+s+x+(t===void 0?Ee:t)}function we(n,e,r,t){var i=""+e,s=""+r;if(!n&&i>s){var a=i;i=s,s=a}var o={v:i,w:s};return t&&(o.name=t),o}function b(n,e){return v(n,e.v,e.w,e.name)}L.exports=m});var A=h((rr,F)=>{F.exports="2.2.5-pre"});var M=h((tr,T)=>{T.exports={Graph:w(),version:A()}});var G=h((ir,P)=>{var be=w();P.exports={write:me,read:je};function me(n){var e={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:Oe(n),edges:ye(n)};return n.graph()!==void 0&&(e.value=structuredClone(n.graph())),e}function Oe(n){return n.nodes().map(function(e){var r=n.node(e),t=n.parent(e),i={v:e};return r!==void 0&&(i.value=r),t!==void 0&&(i.parent=t),i})}function ye(n){return n.edges().map(function(e){var r=n.edge(e),t={v:e.v,w:e.w};return e.name!==void 0&&(t.name=e.name),r!==void 0&&(t.value=r),t})}function je(n){var e=new be(n.options).setGraph(n.value);return n.nodes.forEach(function(r){e.setNode(r.v,r.value),r.parent&&e.setParent(r.v,r.parent)}),n.edges.forEach(function(r){e.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),e}});var V=h((sr,S)=>{S.exports=Ne;function Ne(n){var e={},r=[],t;function i(s){Object.hasOwn(e,s)||(e[s]=!0,t.push(s),n.successors(s).forEach(i),n.predecessors(s).forEach(i))}return n.nodes().forEach(function(s){t=[],i(s),t.length&&r.push(t)}),r}});var y=h((nr,z)=>{var O=class{constructor(){f(this,"_arr",[]);f(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return Object.hasOwn(this._keyIndices,e)}priority(e){var r=this._keyIndices[e];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(e,r){var t=this._keyIndices;if(e=String(e),!Object.hasOwn(t,e)){var i=this._arr,s=i.length;return t[e]=s,i.push({key:e,priority:r}),this._decrease(s),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,r){var t=this._keyIndices[e];if(r>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[t].priority+" New: "+r);this._arr[t].priority=r,this._decrease(t)}_heapify(e){var r=this._arr,t=2*e,i=t+1,s=e;t<r.length&&(s=r[t].priority<r[s].priority?t:s,i<r.length&&(s=r[i].priority<r[s].priority?i:s),s!==e&&(this._swap(e,s),this._heapify(s)))}_decrease(e){for(var r=this._arr,t=r[e].priority,i;e!==0&&(i=e>>1,!(r[i].priority<t));)this._swap(e,i),e=i}_swap(e,r){var t=this._arr,i=this._keyIndices,s=t[e],a=t[r];t[e]=a,t[r]=s,i[a.key]=e,i[s.key]=r}};z.exports=O});var j=h((or,U)=>{var ke=y();U.exports=Ce;var Ie=()=>1;function Ce(n,e,r,t){var i=function(s){return n.outEdges(s)};return xe(n,String(e),r||Ie,t||i)}function xe(n,e,r,t){var i={},s=new ke,a,o,u=function(d){var c=d.v!==a?d.v:d.w,l=i[c],_=r(d),g=o.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+_);g<l.distance&&(l.distance=g,l.predecessor=a,s.decrease(c,g))};for(n.nodes().forEach(function(d){var c=d===e?0:Number.POSITIVE_INFINITY;i[d]={distance:c},s.add(d,c)});s.size()>0&&(a=s.removeMin(),o=i[a],o.distance!==Number.POSITIVE_INFINITY);)t(a).forEach(u);return i}});var Y=h((ur,W)=>{var qe=j();W.exports=De;function De(n,e,r){return n.nodes().reduce(function(t,i){return t[i]=qe(n,i,e,r),t},{})}});var K=h((dr,H)=>{H.exports=Le;function Le(n,e,r){if(n[e].predecessor!==void 0)throw new Error("Invalid source vertex");if(n[r].predecessor===void 0&&r!==e)throw new Error("Invalid destination vertex");return{weight:n[r].distance,path:Fe(n,e,r)}}function Fe(n,e,r){for(var t=[],i=r;i!==e;)t.push(i),i=n[i].predecessor;return t.push(e),t.reverse()}});var N=h((hr,R)=>{R.exports=Ae;function Ae(n){var e=0,r=[],t={},i=[];function s(a){var o=t[a]={onStack:!0,lowlink:e,index:e++};if(r.push(a),n.successors(a).forEach(function(c){Object.hasOwn(t,c)?t[c].onStack&&(o.lowlink=Math.min(o.lowlink,t[c].index)):(s(c),o.lowlink=Math.min(o.lowlink,t[c].lowlink))}),o.lowlink===o.index){var u=[],d;do d=r.pop(),t[d].onStack=!1,u.push(d);while(a!==d);i.push(u)}}return n.nodes().forEach(function(a){Object.hasOwn(t,a)||s(a)}),i}});var B=h((fr,Q)=>{var Te=N();Q.exports=Me;function Me(n){return Te(n).filter(function(e){return e.length>1||e.length===1&&n.hasEdge(e[0],e[0])})}});var X=h((cr,J)=>{J.exports=Ge;var Pe=()=>1;function Ge(n,e,r){return Se(n,e||Pe,r||function(t){return n.outEdges(t)})}function Se(n,e,r){var t={},i=n.nodes();return i.forEach(function(s){t[s]={},t[s][s]={distance:0},i.forEach(function(a){s!==a&&(t[s][a]={distance:Number.POSITIVE_INFINITY})}),r(s).forEach(function(a){var o=a.v===s?a.w:a.v,u=e(a);t[s][o]={distance:u,predecessor:s}})}),i.forEach(function(s){var a=t[s];i.forEach(function(o){var u=t[o];i.forEach(function(d){var c=u[s],l=a[d],_=u[d],g=c.distance+l.distance;g<_.distance&&(_.distance=g,_.predecessor=l.predecessor)})})}),t}});var k=h((lr,$)=>{function Z(n){var e={},r={},t=[];function i(s){if(Object.hasOwn(r,s))throw new E;Object.hasOwn(e,s)||(r[s]=!0,e[s]=!0,n.predecessors(s).forEach(i),delete r[s],t.push(s))}if(n.sinks().forEach(i),Object.keys(e).length!==n.nodeCount())throw new E;return t}var E=class extends Error{constructor(){super(...arguments)}};$.exports=Z;Z.CycleException=E});var te=h((_r,re)=>{var ee=k();re.exports=Ve;function Ve(n){try{ee(n)}catch(e){if(e instanceof ee.CycleException)return!1;throw e}return!0}});var I=h((pr,se)=>{se.exports=ze;function ze(n,e,r,t,i){Array.isArray(e)||(e=[e]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),a={};return e.forEach(function(o){if(!n.hasNode(o))throw new Error("Graph does not have node: "+o);i=ie(n,o,r==="post",a,s,t,i)}),i}function ie(n,e,r,t,i,s,a){return Object.hasOwn(t,e)||(t[e]=!0,r||(a=s(a,e)),i(e).forEach(function(o){a=ie(n,o,r,t,i,s,a)}),r&&(a=s(a,e))),a}});var C=h((gr,ne)=>{var Ue=I();ne.exports=We;function We(n,e,r){return Ue(n,e,r,function(t,i){return t.push(i),t},[])}});var oe=h((vr,ae)=>{var Ye=C();ae.exports=He;function He(n,e){return Ye(n,e,"post")}});var de=h((Er,ue)=>{var Ke=C();ue.exports=Re;function Re(n,e){return Ke(n,e,"pre")}});var fe=h((wr,he)=>{var Qe=w(),Be=y();he.exports=Je;function Je(n,e){var r=new Qe,t={},i=new Be,s;function a(u){var d=u.v===s?u.w:u.v,c=i.priority(d);if(c!==void 0){var l=e(u);l<c&&(t[d]=s,i.decrease(d,l))}}if(n.nodeCount()===0)return r;n.nodes().forEach(function(u){i.add(u,Number.POSITIVE_INFINITY),r.setNode(u)}),i.decrease(n.nodes()[0],0);for(var o=!1;i.size()>0;){if(s=i.removeMin(),Object.hasOwn(t,s))r.setEdge(s,t[s]);else{if(o)throw new Error("Input graph is not connected: "+n);o=!0}n.nodeEdges(s).forEach(a)}return r}});var le=h((br,ce)=>{ce.exports={components:V(),dijkstra:j(),dijkstraAll:Y(),extractPath:K(),findCycles:B(),floydWarshall:X(),isAcyclic:te(),postorder:oe(),preorder:de(),prim:fe(),reduce:I(),tarjan:N(),topsort:k()}});var Xe=h((mr,pe)=>{var _e=M();pe.exports={Graph:_e.Graph,json:G(),alg:le(),version:_e.version}});return Xe();})();
//# sourceMappingURL=graphlib.min.js.map
