var ce=Object.defineProperty;var fe=(n,e,r)=>e in n?ce(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var c=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var d=(n,e,r)=>fe(n,typeof e!="symbol"?e+"":e,r);var b=c((He,D)=>{"use strict";var le="\0",p="\0",C="",m=class{constructor(e){d(this,"_isDirected",!0);d(this,"_isMultigraph",!1);d(this,"_isCompound",!1);d(this,"_label");d(this,"_defaultNodeLabelFn",()=>{});d(this,"_defaultEdgeLabelFn",()=>{});d(this,"_nodes",{});d(this,"_in",{});d(this,"_preds",{});d(this,"_out",{});d(this,"_sucs",{});d(this,"_edgeObjs",{});d(this,"_edgeLabels",{});d(this,"_nodeCount",0);d(this,"_edgeCount",0);d(this,"_parent");d(this,"_children");e&&(this._isDirected=Object.hasOwn(e,"directed")?e.directed:!0,this._isMultigraph=Object.hasOwn(e,"multigraph")?e.multigraph:!1,this._isCompound=Object.hasOwn(e,"compound")?e.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[p]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,typeof e!="function"&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(r=>Object.keys(e._in[r]).length===0)}sinks(){var e=this;return this.nodes().filter(r=>Object.keys(e._out[r]).length===0)}setNodes(e,r){var t=arguments,s=this;return e.forEach(function(i){t.length>1?s.setNode(i,r):s.setNode(i)}),this}setNode(e,r){return Object.hasOwn(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=r),this):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=p,this._children[e]={},this._children[p][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){var r=this;if(Object.hasOwn(this._nodes,e)){var t=s=>r.removeEdge(r._edgeObjs[s]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(s){r.setParent(s)}),delete this._children[e]),Object.keys(this._in[e]).forEach(t),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r===void 0)r=p;else{r+="";for(var t=r;t!==void 0;t=this.parent(t))if(t===e)throw new Error("Setting "+r+" as parent of "+e+" would create a cycle");this.setNode(r)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=r,this._children[r][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var r=this._parent[e];if(r!==p)return r}}children(e=p){if(this._isCompound){var r=this._children[e];if(r)return Object.keys(r)}else{if(e===p)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var r=this._preds[e];if(r)return Object.keys(r)}successors(e){var r=this._sucs[e];if(r)return Object.keys(r)}neighbors(e){var r=this.predecessors(e);if(r){let s=new Set(r);for(var t of this.successors(e))s.add(t);return Array.from(s.values())}}isLeaf(e){var r;return this.isDirected()?r=this.successors(e):r=this.neighbors(e),r.length===0}filterNodes(e){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var t=this;Object.entries(this._nodes).forEach(function([a,o]){e(a)&&r.setNode(a,o)}),Object.values(this._edgeObjs).forEach(function(a){r.hasNode(a.v)&&r.hasNode(a.w)&&r.setEdge(a,t.edge(a))});var s={};function i(a){var o=t.parent(a);return o===void 0||r.hasNode(o)?(s[a]=o,o):o in s?s[o]:i(o)}return this._isCompound&&r.nodes().forEach(a=>r.setParent(a,i(a))),r}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,typeof e!="function"&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,r){var t=this,s=arguments;return e.reduce(function(i,a){return s.length>1?t.setEdge(i,a,r):t.setEdge(i,a),a}),this}setEdge(){var e,r,t,s,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(e=a.v,r=a.w,t=a.name,arguments.length===2&&(s=arguments[1],i=!0)):(e=a,r=arguments[1],t=arguments[3],arguments.length>2&&(s=arguments[2],i=!0)),e=""+e,r=""+r,t!==void 0&&(t=""+t);var o=g(this._isDirected,e,r,t);if(Object.hasOwn(this._edgeLabels,o))return i&&(this._edgeLabels[o]=s),this;if(t!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(r),this._edgeLabels[o]=i?s:this._defaultEdgeLabelFn(e,r,t);var u=_e(this._isDirected,e,r,t);return e=u.v,r=u.w,Object.freeze(u),this._edgeObjs[o]=u,q(this._preds[r],e),q(this._sucs[e],r),this._in[r][o]=u,this._out[e][o]=u,this._edgeCount++,this}edge(e,r,t){var s=arguments.length===1?w(this._isDirected,arguments[0]):g(this._isDirected,e,r,t);return this._edgeLabels[s]}edgeAsObj(){let e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,r,t){var s=arguments.length===1?w(this._isDirected,arguments[0]):g(this._isDirected,e,r,t);return Object.hasOwn(this._edgeLabels,s)}removeEdge(e,r,t){var s=arguments.length===1?w(this._isDirected,arguments[0]):g(this._isDirected,e,r,t),i=this._edgeObjs[s];return i&&(e=i.v,r=i.w,delete this._edgeLabels[s],delete this._edgeObjs[s],x(this._preds[r],e),x(this._sucs[e],r),delete this._in[r][s],delete this._out[e][s],this._edgeCount--),this}inEdges(e,r){var t=this._in[e];if(t){var s=Object.values(t);return r?s.filter(i=>i.v===r):s}}outEdges(e,r){var t=this._out[e];if(t){var s=Object.values(t);return r?s.filter(i=>i.w===r):s}}nodeEdges(e,r){var t=this.inEdges(e,r);if(t)return t.concat(this.outEdges(e,r))}};function q(n,e){n[e]?n[e]++:n[e]=1}function x(n,e){--n[e]||delete n[e]}function g(n,e,r,t){var s=""+e,i=""+r;if(!n&&s>i){var a=s;s=i,i=a}return s+C+i+C+(t===void 0?le:t)}function _e(n,e,r,t){var s=""+e,i=""+r;if(!n&&s>i){var a=s;s=i,i=a}var o={v:s,w:i};return t&&(o.name=t),o}function w(n,e){return g(n,e.v,e.w,e.name)}D.exports=m});var F=c((Re,L)=>{L.exports="2.2.5-pre"});var T=c((Qe,A)=>{A.exports={Graph:b(),version:F()}});var P=c((Be,M)=>{var pe=b();M.exports={write:ve,read:be};function ve(n){var e={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:ge(n),edges:Ee(n)};return n.graph()!==void 0&&(e.value=structuredClone(n.graph())),e}function ge(n){return n.nodes().map(function(e){var r=n.node(e),t=n.parent(e),s={v:e};return r!==void 0&&(s.value=r),t!==void 0&&(s.parent=t),s})}function Ee(n){return n.edges().map(function(e){var r=n.edge(e),t={v:e.v,w:e.w};return e.name!==void 0&&(t.name=e.name),r!==void 0&&(t.value=r),t})}function be(n){var e=new pe(n.options).setGraph(n.value);return n.nodes.forEach(function(r){e.setNode(r.v,r.value),r.parent&&e.setParent(r.v,r.parent)}),n.edges.forEach(function(r){e.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),e}});var S=c((Je,G)=>{G.exports=we;function we(n){var e={},r=[],t;function s(i){Object.hasOwn(e,i)||(e[i]=!0,t.push(i),n.successors(i).forEach(s),n.predecessors(i).forEach(s))}return n.nodes().forEach(function(i){t=[],s(i),t.length&&r.push(t)}),r}});var j=c((Xe,V)=>{var O=class{constructor(){d(this,"_arr",[]);d(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return Object.hasOwn(this._keyIndices,e)}priority(e){var r=this._keyIndices[e];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(e,r){var t=this._keyIndices;if(e=String(e),!Object.hasOwn(t,e)){var s=this._arr,i=s.length;return t[e]=i,s.push({key:e,priority:r}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,r){var t=this._keyIndices[e];if(r>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[t].priority+" New: "+r);this._arr[t].priority=r,this._decrease(t)}_heapify(e){var r=this._arr,t=2*e,s=t+1,i=e;t<r.length&&(i=r[t].priority<r[i].priority?t:i,s<r.length&&(i=r[s].priority<r[i].priority?s:i),i!==e&&(this._swap(e,i),this._heapify(i)))}_decrease(e){for(var r=this._arr,t=r[e].priority,s;e!==0&&(s=e>>1,!(r[s].priority<t));)this._swap(e,s),e=s}_swap(e,r){var t=this._arr,s=this._keyIndices,i=t[e],a=t[r];t[e]=a,t[r]=i,s[a.key]=e,s[i.key]=r}};V.exports=O});var y=c(($e,z)=>{var me=j();z.exports=je;var Oe=()=>1;function je(n,e,r,t){return ye(n,String(e),r||Oe,t||function(s){return n.outEdges(s)})}function ye(n,e,r,t){var s={},i=new me,a,o,u=function(h){var f=h.v!==a?h.v:h.w,l=s[f],_=r(h),v=o.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+_);v<l.distance&&(l.distance=v,l.predecessor=a,i.decrease(f,v))};for(n.nodes().forEach(function(h){var f=h===e?0:Number.POSITIVE_INFINITY;s[h]={distance:f},i.add(h,f)});i.size()>0&&(a=i.removeMin(),o=s[a],o.distance!==Number.POSITIVE_INFINITY);)t(a).forEach(u);return s}});var W=c((er,U)=>{var Ne=y();U.exports=ke;function ke(n,e,r){return n.nodes().reduce(function(t,s){return t[s]=Ne(n,s,e,r),t},{})}});var N=c((rr,Y)=>{Y.exports=Ie;function Ie(n){var e=0,r=[],t={},s=[];function i(a){var o=t[a]={onStack:!0,lowlink:e,index:e++};if(r.push(a),n.successors(a).forEach(function(f){Object.hasOwn(t,f)?t[f].onStack&&(o.lowlink=Math.min(o.lowlink,t[f].index)):(i(f),o.lowlink=Math.min(o.lowlink,t[f].lowlink))}),o.lowlink===o.index){var u=[],h;do h=r.pop(),t[h].onStack=!1,u.push(h);while(a!==h);s.push(u)}}return n.nodes().forEach(function(a){Object.hasOwn(t,a)||i(a)}),s}});var K=c((tr,H)=>{var Ce=N();H.exports=qe;function qe(n){return Ce(n).filter(function(e){return e.length>1||e.length===1&&n.hasEdge(e[0],e[0])})}});var Q=c((sr,R)=>{R.exports=De;var xe=()=>1;function De(n,e,r){return Le(n,e||xe,r||function(t){return n.outEdges(t)})}function Le(n,e,r){var t={},s=n.nodes();return s.forEach(function(i){t[i]={},t[i][i]={distance:0},s.forEach(function(a){i!==a&&(t[i][a]={distance:Number.POSITIVE_INFINITY})}),r(i).forEach(function(a){var o=a.v===i?a.w:a.v,u=e(a);t[i][o]={distance:u,predecessor:i}})}),s.forEach(function(i){var a=t[i];s.forEach(function(o){var u=t[o];s.forEach(function(h){var f=u[i],l=a[h],_=u[h],v=f.distance+l.distance;v<_.distance&&(_.distance=v,_.predecessor=l.predecessor)})})}),t}});var k=c((ir,J)=>{function B(n){var e={},r={},t=[];function s(i){if(Object.hasOwn(r,i))throw new E;Object.hasOwn(e,i)||(r[i]=!0,e[i]=!0,n.predecessors(i).forEach(s),delete r[i],t.push(i))}if(n.sinks().forEach(s),Object.keys(e).length!==n.nodeCount())throw new E;return t}var E=class extends Error{constructor(){super(...arguments)}};J.exports=B;B.CycleException=E});var $=c((nr,Z)=>{var X=k();Z.exports=Fe;function Fe(n){try{X(n)}catch(e){if(e instanceof X.CycleException)return!1;throw e}return!0}});var I=c((ar,re)=>{re.exports=Ae;function Ae(n,e,r){Array.isArray(e)||(e=[e]);var t=n.isDirected()?o=>n.successors(o):o=>n.neighbors(o),s=r==="post"?Te:Me,i=[],a={};return e.forEach(o=>{if(!n.hasNode(o))throw new Error("Graph does not have node: "+o);s(o,t,a,i)}),i}function Te(n,e,r,t){for(var s=[[n,!1]];s.length>0;){var i=s.pop();i[1]?t.push(i[0]):Object.hasOwn(r,i[0])||(r[i[0]]=!0,s.push([i[0],!0]),ee(e(i[0]),a=>s.push([a,!1])))}}function Me(n,e,r,t){for(var s=[n];s.length>0;){var i=s.pop();Object.hasOwn(r,i)||(r[i]=!0,t.push(i),ee(e(i),a=>s.push(a)))}}function ee(n,e){for(var r=n.length;r--;)e(n[r],r,n);return n}});var se=c((or,te)=>{var Pe=I();te.exports=Ge;function Ge(n,e){return Pe(n,e,"post")}});var ne=c((ur,ie)=>{var Se=I();ie.exports=Ve;function Ve(n,e){return Se(n,e,"pre")}});var oe=c((hr,ae)=>{var ze=b(),Ue=j();ae.exports=We;function We(n,e){var r=new ze,t={},s=new Ue,i;function a(u){var h=u.v===i?u.w:u.v,f=s.priority(h);if(f!==void 0){var l=e(u);l<f&&(t[h]=i,s.decrease(h,l))}}if(n.nodeCount()===0)return r;n.nodes().forEach(function(u){s.add(u,Number.POSITIVE_INFINITY),r.setNode(u)}),s.decrease(n.nodes()[0],0);for(var o=!1;s.size()>0;){if(i=s.removeMin(),Object.hasOwn(t,i))r.setEdge(i,t[i]);else{if(o)throw new Error("Input graph is not connected: "+n);o=!0}n.nodeEdges(i).forEach(a)}return r}});var he=c((dr,ue)=>{ue.exports={components:S(),dijkstra:y(),dijkstraAll:W(),findCycles:K(),floydWarshall:Q(),isAcyclic:$(),postorder:se(),preorder:ne(),prim:oe(),tarjan:N(),topsort:k()}});var de=T();module.exports={Graph:de.Graph,json:P(),alg:he(),version:de.version};
//# sourceMappingURL=dagre.cjs.js.map
