var ve=Object.defineProperty;var ge=(s,e,r)=>e in s?ve(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r;var h=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var c=(s,e,r)=>ge(s,typeof e!="symbol"?e+"":e,r);var w=h(($e,D)=>{"use strict";var Ee="\0",p="\0",x="",m=class{constructor(e){c(this,"_isDirected",!0);c(this,"_isMultigraph",!1);c(this,"_isCompound",!1);c(this,"_label");c(this,"_defaultNodeLabelFn",()=>{});c(this,"_defaultEdgeLabelFn",()=>{});c(this,"_nodes",{});c(this,"_in",{});c(this,"_preds",{});c(this,"_out",{});c(this,"_sucs",{});c(this,"_edgeObjs",{});c(this,"_edgeLabels",{});c(this,"_nodeCount",0);c(this,"_edgeCount",0);c(this,"_parent");c(this,"_children");e&&(this._isDirected=Object.hasOwn(e,"directed")?e.directed:!0,this._isMultigraph=Object.hasOwn(e,"multigraph")?e.multigraph:!1,this._isCompound=Object.hasOwn(e,"compound")?e.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[p]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,typeof e!="function"&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter(r=>Object.keys(e._in[r]).length===0)}sinks(){var e=this;return this.nodes().filter(r=>Object.keys(e._out[r]).length===0)}setNodes(e,r){var t=arguments,i=this;return e.forEach(function(n){t.length>1?i.setNode(n,r):i.setNode(n)}),this}setNode(e,r){return Object.hasOwn(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=r),this):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=p,this._children[e]={},this._children[p][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){var r=this;if(Object.hasOwn(this._nodes,e)){var t=i=>r.removeEdge(r._edgeObjs[i]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach(function(i){r.setParent(i)}),delete this._children[e]),Object.keys(this._in[e]).forEach(t),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r===void 0)r=p;else{r+="";for(var t=r;t!==void 0;t=this.parent(t))if(t===e)throw new Error("Setting "+r+" as parent of "+e+" would create a cycle");this.setNode(r)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=r,this._children[r][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var r=this._parent[e];if(r!==p)return r}}children(e=p){if(this._isCompound){var r=this._children[e];if(r)return Object.keys(r)}else{if(e===p)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var r=this._preds[e];if(r)return Object.keys(r)}successors(e){var r=this._sucs[e];if(r)return Object.keys(r)}neighbors(e){var r=this.predecessors(e);if(r){let i=new Set(r);for(var t of this.successors(e))i.add(t);return Array.from(i.values())}}isLeaf(e){var r;return this.isDirected()?r=this.successors(e):r=this.neighbors(e),r.length===0}filterNodes(e){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var t=this;Object.entries(this._nodes).forEach(function([a,o]){e(a)&&r.setNode(a,o)}),Object.values(this._edgeObjs).forEach(function(a){r.hasNode(a.v)&&r.hasNode(a.w)&&r.setEdge(a,t.edge(a))});var i={};function n(a){var o=t.parent(a);return o===void 0||r.hasNode(o)?(i[a]=o,o):o in i?i[o]:n(o)}return this._isCompound&&r.nodes().forEach(a=>r.setParent(a,n(a))),r}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,typeof e!="function"&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,r){var t=this,i=arguments;return e.reduce(function(n,a){return i.length>1?t.setEdge(n,a,r):t.setEdge(n,a),a}),this}setEdge(){var e,r,t,i,n=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(e=a.v,r=a.w,t=a.name,arguments.length===2&&(i=arguments[1],n=!0)):(e=a,r=arguments[1],t=arguments[3],arguments.length>2&&(i=arguments[2],n=!0)),e=""+e,r=""+r,t!==void 0&&(t=""+t);var o=g(this._isDirected,e,r,t);if(Object.hasOwn(this._edgeLabels,o))return n&&(this._edgeLabels[o]=i),this;if(t!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(r),this._edgeLabels[o]=n?i:this._defaultEdgeLabelFn(e,r,t);var u=we(this._isDirected,e,r,t);return e=u.v,r=u.w,Object.freeze(u),this._edgeObjs[o]=u,q(this._preds[r],e),q(this._sucs[e],r),this._in[r][o]=u,this._out[e][o]=u,this._edgeCount++,this}edge(e,r,t){var i=arguments.length===1?b(this._isDirected,arguments[0]):g(this._isDirected,e,r,t);return this._edgeLabels[i]}edgeAsObj(){let e=this.edge(...arguments);return typeof e!="object"?{label:e}:e}hasEdge(e,r,t){var i=arguments.length===1?b(this._isDirected,arguments[0]):g(this._isDirected,e,r,t);return Object.hasOwn(this._edgeLabels,i)}removeEdge(e,r,t){var i=arguments.length===1?b(this._isDirected,arguments[0]):g(this._isDirected,e,r,t),n=this._edgeObjs[i];return n&&(e=n.v,r=n.w,delete this._edgeLabels[i],delete this._edgeObjs[i],L(this._preds[r],e),L(this._sucs[e],r),delete this._in[r][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,r){var t=this._in[e];if(t){var i=Object.values(t);return r?i.filter(n=>n.v===r):i}}outEdges(e,r){var t=this._out[e];if(t){var i=Object.values(t);return r?i.filter(n=>n.w===r):i}}nodeEdges(e,r){var t=this.inEdges(e,r);if(t)return t.concat(this.outEdges(e,r))}};function q(s,e){s[e]?s[e]++:s[e]=1}function L(s,e){--s[e]||delete s[e]}function g(s,e,r,t){var i=""+e,n=""+r;if(!s&&i>n){var a=i;i=n,n=a}return i+x+n+x+(t===void 0?Ee:t)}function we(s,e,r,t){var i=""+e,n=""+r;if(!s&&i>n){var a=i;i=n,n=a}var o={v:i,w:n};return t&&(o.name=t),o}function b(s,e){return g(s,e.v,e.w,e.name)}D.exports=m});var A=h((rr,F)=>{F.exports="2.2.5-pre"});var M=h((tr,T)=>{T.exports={Graph:w(),version:A()}});var G=h((ir,P)=>{var be=w();P.exports={write:me,read:je};function me(s){var e={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:Oe(s),edges:ye(s)};return s.graph()!==void 0&&(e.value=structuredClone(s.graph())),e}function Oe(s){return s.nodes().map(function(e){var r=s.node(e),t=s.parent(e),i={v:e};return r!==void 0&&(i.value=r),t!==void 0&&(i.parent=t),i})}function ye(s){return s.edges().map(function(e){var r=s.edge(e),t={v:e.v,w:e.w};return e.name!==void 0&&(t.name=e.name),r!==void 0&&(t.value=r),t})}function je(s){var e=new be(s.options).setGraph(s.value);return s.nodes.forEach(function(r){e.setNode(r.v,r.value),r.parent&&e.setParent(r.v,r.parent)}),s.edges.forEach(function(r){e.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),e}});var V=h((sr,S)=>{S.exports=Ne;function Ne(s){var e={},r=[],t;function i(n){Object.hasOwn(e,n)||(e[n]=!0,t.push(n),s.successors(n).forEach(i),s.predecessors(n).forEach(i))}return s.nodes().forEach(function(n){t=[],i(n),t.length&&r.push(t)}),r}});var y=h((nr,z)=>{var O=class{constructor(){c(this,"_arr",[]);c(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(e){return e.key})}has(e){return Object.hasOwn(this._keyIndices,e)}priority(e){var r=this._keyIndices[e];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(e,r){var t=this._keyIndices;if(e=String(e),!Object.hasOwn(t,e)){var i=this._arr,n=i.length;return t[e]=n,i.push({key:e,priority:r}),this._decrease(n),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,r){var t=this._keyIndices[e];if(r>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[t].priority+" New: "+r);this._arr[t].priority=r,this._decrease(t)}_heapify(e){var r=this._arr,t=2*e,i=t+1,n=e;t<r.length&&(n=r[t].priority<r[n].priority?t:n,i<r.length&&(n=r[i].priority<r[n].priority?i:n),n!==e&&(this._swap(e,n),this._heapify(n)))}_decrease(e){for(var r=this._arr,t=r[e].priority,i;e!==0&&(i=e>>1,!(r[i].priority<t));)this._swap(e,i),e=i}_swap(e,r){var t=this._arr,i=this._keyIndices,n=t[e],a=t[r];t[e]=a,t[r]=n,i[a.key]=e,i[n.key]=r}};z.exports=O});var j=h((or,U)=>{var ke=y();U.exports=Ce;var Ie=()=>1;function Ce(s,e,r,t){return xe(s,String(e),r||Ie,t||function(i){return s.outEdges(i)})}function xe(s,e,r,t){var i={},n=new ke,a,o,u=function(d){var f=d.v!==a?d.v:d.w,l=i[f],_=r(d),v=o.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+_);v<l.distance&&(l.distance=v,l.predecessor=a,n.decrease(f,v))};for(s.nodes().forEach(function(d){var f=d===e?0:Number.POSITIVE_INFINITY;i[d]={distance:f},n.add(d,f)});n.size()>0&&(a=n.removeMin(),o=i[a],o.distance!==Number.POSITIVE_INFINITY);)t(a).forEach(u);return i}});var Y=h((ur,W)=>{var qe=j();W.exports=Le;function Le(s,e,r){return s.nodes().reduce(function(t,i){return t[i]=qe(s,i,e,r),t},{})}});var K=h((dr,H)=>{H.exports=De;function De(s,e,r){if(s[e].predecessor!==void 0)throw new Error("Invalid source vertex");if(s[r].predecessor===void 0&&r!==e)throw new Error("Invalid destination vertex");return{weight:s[r].distance,path:Fe(s,e,r)}}function Fe(s,e,r){for(var t=[],i=r;i!==e;)t.push(i),i=s[i].predecessor;return t.push(e),t.reverse()}});var N=h((hr,R)=>{R.exports=Ae;function Ae(s){var e=0,r=[],t={},i=[];function n(a){var o=t[a]={onStack:!0,lowlink:e,index:e++};if(r.push(a),s.successors(a).forEach(function(f){Object.hasOwn(t,f)?t[f].onStack&&(o.lowlink=Math.min(o.lowlink,t[f].index)):(n(f),o.lowlink=Math.min(o.lowlink,t[f].lowlink))}),o.lowlink===o.index){var u=[],d;do d=r.pop(),t[d].onStack=!1,u.push(d);while(a!==d);i.push(u)}}return s.nodes().forEach(function(a){Object.hasOwn(t,a)||n(a)}),i}});var B=h((cr,Q)=>{var Te=N();Q.exports=Me;function Me(s){return Te(s).filter(function(e){return e.length>1||e.length===1&&s.hasEdge(e[0],e[0])})}});var X=h((fr,J)=>{J.exports=Ge;var Pe=()=>1;function Ge(s,e,r){return Se(s,e||Pe,r||function(t){return s.outEdges(t)})}function Se(s,e,r){var t={},i=s.nodes();return i.forEach(function(n){t[n]={},t[n][n]={distance:0},i.forEach(function(a){n!==a&&(t[n][a]={distance:Number.POSITIVE_INFINITY})}),r(n).forEach(function(a){var o=a.v===n?a.w:a.v,u=e(a);t[n][o]={distance:u,predecessor:n}})}),i.forEach(function(n){var a=t[n];i.forEach(function(o){var u=t[o];i.forEach(function(d){var f=u[n],l=a[d],_=u[d],v=f.distance+l.distance;v<_.distance&&(_.distance=v,_.predecessor=l.predecessor)})})}),t}});var k=h((lr,$)=>{function Z(s){var e={},r={},t=[];function i(n){if(Object.hasOwn(r,n))throw new E;Object.hasOwn(e,n)||(r[n]=!0,e[n]=!0,s.predecessors(n).forEach(i),delete r[n],t.push(n))}if(s.sinks().forEach(i),Object.keys(e).length!==s.nodeCount())throw new E;return t}var E=class extends Error{constructor(){super(...arguments)}};$.exports=Z;Z.CycleException=E});var te=h((_r,re)=>{var ee=k();re.exports=Ve;function Ve(s){try{ee(s)}catch(e){if(e instanceof ee.CycleException)return!1;throw e}return!0}});var I=h((pr,se)=>{se.exports=ze;function ze(s,e,r,t,i){Array.isArray(e)||(e=[e]);var n=(s.isDirected()?s.successors:s.neighbors).bind(s),a={};return e.forEach(function(o){if(!s.hasNode(o))throw new Error("Graph does not have node: "+o);i=ie(s,o,r==="post",a,n,t,i)}),i}function ie(s,e,r,t,i,n,a){return Object.hasOwn(t,e)||(t[e]=!0,r||(a=n(a,e)),i(e).forEach(function(o){a=ie(s,o,r,t,i,n,a)}),r&&(a=n(a,e))),a}});var C=h((vr,ne)=>{var Ue=I();ne.exports=We;function We(s,e,r){return Ue(s,e,r,function(t,i){return t.push(i),t},[])}});var oe=h((gr,ae)=>{var Ye=C();ae.exports=He;function He(s,e){return Ye(s,e,"post")}});var de=h((Er,ue)=>{var Ke=C();ue.exports=Re;function Re(s,e){return Ke(s,e,"pre")}});var ce=h((wr,he)=>{var Qe=w(),Be=y();he.exports=Je;function Je(s,e){var r=new Qe,t={},i=new Be,n;function a(u){var d=u.v===n?u.w:u.v,f=i.priority(d);if(f!==void 0){var l=e(u);l<f&&(t[d]=n,i.decrease(d,l))}}if(s.nodeCount()===0)return r;s.nodes().forEach(function(u){i.add(u,Number.POSITIVE_INFINITY),r.setNode(u)}),i.decrease(s.nodes()[0],0);for(var o=!1;i.size()>0;){if(n=i.removeMin(),Object.hasOwn(t,n))r.setEdge(n,t[n]);else{if(o)throw new Error("Input graph is not connected: "+s);o=!0}s.nodeEdges(n).forEach(a)}return r}});var le=h((br,fe)=>{fe.exports={components:V(),dijkstra:j(),dijkstraAll:Y(),extractPath:K(),findCycles:B(),floydWarshall:X(),isAcyclic:te(),postorder:oe(),preorder:de(),prim:ce(),reduce:I(),tarjan:N(),topsort:k()}});var Xe=h((mr,pe)=>{var _e=M();pe.exports={Graph:_e.Graph,json:G(),alg:le(),version:_e.version}});export default Xe();
//# sourceMappingURL=graphlib.esm.js.map
